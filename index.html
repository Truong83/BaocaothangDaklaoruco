<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√°o C√°o Infographic - Th√°ng 10/2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #1F2F36;
            color: #E5E7EB;
            padding-bottom: 80px;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .chart-container-sm {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            height: 250px;
            max-height: 300px;
        }
        @media (min-width: 768px) {
            .chart-container-sm {
                height: 300px;
            }
        }
        .kpi-card {
            background-color: #75B033;
            color: #FFF;
            font-weight: 700;
        }
        .kpi-value {
            font-size: 2.25rem;
            font-weight: 900;
            line-height: 1.2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
        }
        .kpi-label {
            font-size: 0.875rem;
            opacity: 1;
            font-weight: 800;
        }
        .card-bg {
            background-color: #2B3C44;
        }
        .indicator-badge {
            display: inline-flex;
            align-items: center;
            padding: 2px 8px;
            margin-top: 4px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 800;
            background-color: #FFF;
            color: #1F2F36;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.4), 0 2px 4px -2px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            position: relative;
        }
        .indicator-badge:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #1F2F36;
            color: #E5E7EB;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
            z-index: 1000;
            margin-bottom: 5px;
            border: 1px solid #374151;
        }
        .up-arrow {
            color: #4CAF50;
            margin-right: 2px;
            font-weight: 900;
        }
        .down-arrow {
            color: #D63030;
            margin-right: 2px;
            font-weight: 900;
        }
        .fixed-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #1F2F36;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            z-index: 1000;
            border-top: 1px solid #374151;
        }
        .data-controls {
            background-color: #2B3C44;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .data-input {
            background-color: #1F2F36;
            border: 1px solid #374151;
            color: #E5E7EB;
            padding: 8px;
            border-radius: 4px;
            margin: 5px;
            width: 120px;
        }
        .data-textarea {
            background-color: #1F2F36;
            border: 1px solid #374151;
            color: #E5E7EB;
            padding: 8px;
            border-radius: 4px;
            margin: 5px;
            width: 100%;
            min-height: 80px;
        }
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(31, 47, 54, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }
        .login-form {
            background-color: #2B3C44;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            position: relative;
        }
        .close-login {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #E5E7EB;
            font-size: 20px;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button {
            background-color: #374151;
            color: #E5E7EB;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            margin: 5px;
            cursor: pointer;
        }
        .tab-button.active {
            background-color: #75B033;
        }
    </style>
</head>
<body class="text-gray-100">

    <!-- Form ƒêƒÉng Nh·∫≠p (·∫®n ban ƒë·∫ßu) -->
    <div id="loginContainer" class="login-container">
        <div class="login-form">
            <button class="close-login" onclick="closeLogin()">√ó</button>
            <h2 class="text-2xl font-bold text-center mb-6">ƒêƒÉng Nh·∫≠p H·ªá Th·ªëng</h2>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-300 mb-2">T√™n ƒëƒÉng nh·∫≠p</label>
                <input type="text" id="username" class="data-input w-full" placeholder="Nh·∫≠p username">
            </div>
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-300 mb-2">M·∫≠t kh·∫©u</label>
                <input type="password" id="password" class="data-input w-full" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
            </div>
            <button onclick="login()" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded">
                ƒêƒÉng Nh·∫≠p
            </button>
            <p id="loginError" class="text-red-400 text-sm mt-3 text-center hidden">Sai t√™n ƒëƒÉng nh·∫≠p ho·∫∑c m·∫≠t kh·∫©u!</p>
        </div>
    </div>

    <!-- N√∫t c·ªë ƒë·ªãnh lu√¥n hi·ªÉn th·ªã -->
    <div class="fixed-buttons">
        <button id="exportPdf" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
            üìä Xu·∫•t B√°o c√°o PDF
        </button>
        <button onclick="showLogin()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
            üõ†Ô∏è Qu·∫£n L√Ω D·ªØ Li·ªáu
        </button>
        <a href="https://daklaoruco.com" target="_blank" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-300">
            üè† V·ªÅ trang ch·ªß DAKLAORUCO
        </a>
    </div>

    <div class="container mx-auto p-4 md:p-8">
        
        <!-- ========== KHU V·ª∞C QU·∫¢N L√ù D·ªÆ LI·ªÜU T·∫¨P TRUNG ========== -->
        <div id="dataControls" class="data-controls mb-6 hidden">
            <h2 class="text-xl font-bold text-gray-50 mb-4">üéõÔ∏è QU·∫¢N L√ù D·ªÆ LI·ªÜU T·∫¨P TRUNG</h2>
            
            <!-- Tab Navigation -->
            <div class="flex flex-wrap mb-4">
                <button class="tab-button active" onclick="openTab('kpiTab')">KPI Cards</button>
                <button class="tab-button" onclick="openTab('chartsTab')">Bi·ªÉu ƒê·ªì</button>
                <button class="tab-button" onclick="openTab('contentTab')">N·ªôi Dung</button>
            </div>
            
            <!-- KPI Cards Tab -->
            <div id="kpiTab" class="tab-content active">
                <h3 class="text-lg font-bold mb-3">KPI Cards</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">KPI S·∫£n L∆∞·ª£ng (%)</label>
                        <input type="text" id="kpiProduction" class="data-input" value="111.76">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">KPI L·ª£i Nhu·∫≠n (%)</label>
                        <input type="text" id="kpiProfit" class="data-input" value="120.2">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">KPI ƒê∆°n Gi√° ($)</label>
                        <input type="text" id="kpiPrice" class="data-input" value="1790.78">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">KPI Doanh Thu (%)</label>
                        <input type="text" id="kpiRevenue" class="data-input" value="85.15">
                    </div>
                </div>
            </div>
            
            <!-- Bi·ªÉu ƒê·ªì Tab -->
            <div id="chartsTab" class="tab-content">
                <h3 class="text-lg font-bold mb-3">D·ªØ Li·ªáu Bi·ªÉu ƒê·ªì</h3>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì S·∫£n L∆∞·ª£ng Theo NT (K·∫ø Ho·∫°ch)</h4>
                    <input type="text" id="chartProdPlan1" class="data-input" value="534.90" placeholder="NT1">
                    <input type="text" id="chartProdPlan2" class="data-input" value="502.80" placeholder="NT2">
                    <input type="text" id="chartProdPlan3" class="data-input" value="567.40" placeholder="NT3">
                    <input type="text" id="chartProdPlan4" class="data-input" value="385.20" placeholder="NT4">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì S·∫£n L∆∞·ª£ng Theo NT (Th·ª±c Hi·ªán)</h4>
                    <input type="text" id="chartProdActual1" class="data-input" value="549.71" placeholder="NT1">
                    <input type="text" id="chartProdActual2" class="data-input" value="622.57" placeholder="NT2">
                    <input type="text" id="chartProdActual3" class="data-input" value="621.66" placeholder="NT3">
                    <input type="text" id="chartProdActual4" class="data-input" value="430.38" placeholder="NT4">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì L≈©y K·∫ø NƒÉm</h4>
                    <input type="text" id="chartYtdAchieved" class="data-input" value="10240.58" placeholder="ƒê√£ th·ª±c hi·ªán">
                    <input type="text" id="chartYtdTarget" class="data-input" value="13500.00" placeholder="M·ª•c ti√™u">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì T√†i Ch√≠nh (Th·ª±c Hi·ªán % KH)</h4>
                    <input type="text" id="chartFinance1" class="data-input" value="85" placeholder="Doanh thu">
                    <input type="text" id="chartFinance2" class="data-input" value="101.2" placeholder="L·ª£i nhu·∫≠n g·ªôp">
                    <input type="text" id="chartFinance3" class="data-input" value="120.2" placeholder="L·ª£i nhu·∫≠n tr∆∞·ªõc thu·∫ø">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì C∆° C·∫•u L·ª£i Nhu·∫≠n (t·ª∑ K√≠p)</h4>
                    <input type="text" id="chartProfit1" class="data-input" value="140.63" placeholder="Cao su khai th√°c">
                    <input type="text" id="chartProfit2" class="data-input" value="2.59" placeholder="Cao su mua ngo√†i">
                    <input type="text" id="chartProfit3" class="data-input" value="0.73" placeholder="H·∫°t ƒëi·ªÅu">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì ChƒÉm S√≥c (% ho√†n th√†nh)</h4>
                    <input type="text" id="chartCultivation1" class="data-input" value="82.08" placeholder="V∆∞·ªùn kinh doanh">
                    <input type="text" id="chartCultivation2" class="data-input" value="100" placeholder="V∆∞·ªùn KTCB">
                    <input type="text" id="chartCultivation3" class="data-input" value="100" placeholder="V∆∞·ªùn ƒëi·ªÅu">
                    <input type="text" id="chartCultivation4" class="data-input" value="98.90" placeholder="Tr·ªìng m·ªõi">
                    <input type="text" id="chartCultivation5" class="data-input" value="100" placeholder="S·∫ßu ri√™ng">
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">Bi·ªÉu ƒê·ªì Nh√¢n S·ª± (%)</h4>
                    <input type="text" id="chartHr1" class="data-input" value="1.45" placeholder="Tr·ªëng v∆∞·ªùn">
                    <input type="text" id="chartHr2" class="data-input" value="12.83" placeholder="V·∫Øng c·∫°o">
                    <input type="text" id="chartHr3" class="data-input" value="27.9" placeholder="BHXH">
                </div>
            </div>
            
            <!-- N·ªôi Dung Tab -->
            <div id="contentTab" class="tab-content">
                <h3 class="text-lg font-bold mb-3">N·ªôi Dung M√¥ T·∫£</h3>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-300 mb-2">M√¥ t·∫£ Bi·ªÉu ƒê·ªì S·∫£n L∆∞·ª£ng</label>
                    <textarea id="contentProduction" class="data-textarea">To√†n C√¥ng ty ƒë·∫°t 2.224,31 t·∫•n (111,76% KH th√°ng). L≈©y k·∫ø ƒë·∫°t 75,86% KH nƒÉm 2025. ƒê√¢y l√† th√†nh t·ª±u n·ªïi b·∫≠t trong ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt kh√¥ng thu·∫≠n l·ª£i.</textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-300 mb-2">M√¥ t·∫£ Bi·ªÉu ƒê·ªì L≈©y K·∫ø</label>
                    <textarea id="contentYtd" class="data-textarea">T√≠nh ƒë·∫øn h·∫øt th√°ng 10, c√¥ng ty ƒë√£ th·ª±c hi·ªán ƒë∆∞·ª£c 10.240,58 t·∫•n, ƒë·∫°t 75,86% k·∫ø ho·∫°ch nƒÉm (13.500 t·∫•n). ƒê√¢y l√† ti·ªÅn ƒë·ªÅ quan tr·ªçng ƒë·ªÉ ho√†n th√†nh m·ª•c ti√™u c·∫£ nƒÉm trong giai ƒëo·∫°n cao ƒëi·ªÉm cu·ªëi nƒÉm.</textarea>
                </div>
                
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-300 mb-2">M√¥ t·∫£ Bi·ªÉu ƒê·ªì T√†i Ch√≠nh</label>
                    <textarea id="contentFinance" class="data-textarea">K·∫øt qu·∫£ kinh doanh h·∫øt s·ª©c t√≠ch c·ª±c. D√π s·∫£n l∆∞·ª£ng b√°n m·ªõi ƒë·∫°t 79,4% v√† doanh thu ƒë·∫°t 85% KH, l·ª£i nhu·∫≠n tr∆∞·ªõc thu·∫ø ƒë√£ v∆∞·ª£t 20,2% KH nƒÉm. ƒêi·ªÅu n√†y minh ch·ª©ng cho hi·ªáu qu·∫£ c·ªßa chi·∫øn l∆∞·ª£c b√°n h√†ng t·ªëi ∆∞u gi√° v√† ki·ªÉm so√°t chi ph√≠ ch·∫∑t ch·∫Ω (chi ph√≠ b√°n h√†ng ch·ªâ s·ª≠ d·ª•ng 50,4% KH). D√≤ng ti·ªÅn thu·∫ßn th√°ng 10 ƒë·∫°t +30,26 t·ª∑ K√≠p.</textarea>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">V·∫•n ƒê·ªÅ T·ªìn T·∫°i & R·ªßi Ro</h4>
                    <textarea id="contentRisks" class="data-textarea" rows="4">‚Ä¢ Tr·ªôm c·∫Øp m·ªß: X·∫£y ra 10 v·ª•, thu h·ªìi 672 kg. V·∫•n ƒë·ªÅ ph·ª©c t·∫°p do c√≥ s·ª± ti·∫øp tay c·ªßa c√°c ƒëi·ªÉm thu mua tr√°i ph√©p.
‚Ä¢ M·ªß r·ªõt c·∫•p cao: Kh·ªëi l∆∞·ª£ng m·ªß nguy√™n li·ªáu r·ªõt c·∫•p to√†n c√¥ng ty chi·∫øm 45,53% (cao nh·∫•t t·∫°i NT1: 56,22%). Nguy√™n nh√¢n ch√≠nh l√† do m·ªß d√≠nh n∆∞·ªõc m∆∞a trong qu√° tr√¨nh c·∫°o.
‚Ä¢ XDCB ch·∫≠m ti·∫øn ƒë·ªô: H·∫°ng m·ª•c s√¢n b√™ t√¥ng (40%) v√† pallet s·∫Øt (5%) b·ªã ch·∫≠m do thi·∫øu nh√¢n l·ª±c v√† v·∫≠t t∆∞.
‚Ä¢ Thu mua ngo√†i: Kh√¥ng ƒë·∫°t k·∫ø ho·∫°ch th√°ng (72,46%) do th·ªã tr∆∞·ªùng c·∫°nh tranh m·∫°nh v√† gi√° thu mua b√™n ngo√†i cao h∆°n gi√° c√¥ng ty.
‚Ä¢ Ph·∫ßn m·ªÅm Workit: Module t√≠nh l∆∞∆°ng b·ªã ch·∫≠m ti·∫øn ƒë·ªô, ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫ø ho·∫°ch tr·∫£ l∆∞∆°ng.</textarea>
                </div>
                
                <div class="mb-4">
                    <h4 class="font-medium mb-2">ƒê·ªÅ Xu·∫•t H√†nh ƒê·ªông</h4>
                    <textarea id="contentActions" class="data-textarea" rows="4">‚Ä¢ Ch·∫•t l∆∞·ª£ng Khai th√°c: T·∫≠p trung gi·∫£i ph√°p gi·∫£m m·ªß r·ªõt c·∫•p (45,53%) b·∫±ng c√°ch ki·ªÉm so√°t ch·∫∑t ch·∫Ω quy tr√¨nh c·∫°o v√† thu ho·∫°ch khi th·ªùi ti·∫øt thay ƒë·ªïi (t·ªëi ∆∞u h√≥a vi·ªác s·ª≠ d·ª•ng m√°ng che m∆∞a v√† quy tr√¨nh c·∫°o tr·ªÖ).
‚Ä¢ ƒê·∫£m b·∫£o Ti·∫øn ƒë·ªô C√¥ng tr√¨nh: Kh·∫Øc ph·ª•c ngay v·∫•n ƒë·ªÅ thi·∫øu nh√¢n l·ª±c v√† cung ·ª©ng v·∫≠t t∆∞ ƒë·ªÉ ho√†n th√†nh c√°c h·∫°ng m·ª•c XDCB c√≤n ch·∫≠m ti·∫øn ƒë·ªô (S√¢n b√™ t√¥ng, pallet s·∫Øt).
‚Ä¢ Ho√†n thi·ªán H·ªá th·ªëng L∆∞∆°ng: Quy·∫øt li·ªát x·ª≠ l√Ω d·ª©t ƒëi·ªÉm c√°c l·ªói v√† th·ªëng nh·∫•t d·ªØ li·ªáu tr√™n ph·∫ßn m·ªÅm Workit ƒë·ªÉ ƒë·∫£m b·∫£o ti·∫øn ƒë·ªô tr·∫£ l∆∞∆°ng cho c√¥ng nh√¢n.
‚Ä¢ Ki·ªÉm so√°t Tr·ªôm c·∫Øp: TƒÉng c∆∞·ªùng c√¥ng t√°c b·∫£o v·ªá s·∫£n ph·∫©m, ƒë·∫∑c bi·ªát t·∫°i c√°c n√¥ng tr∆∞·ªùng c√≥ t·ª∑ l·ªá vi ph·∫°m cao (NT3 v√† NT1), ƒë·ªìng th·ªùi ph·ªëi h·ª£p v·ªõi ch√≠nh quy·ªÅn ƒë·ªãa ph∆∞∆°ng ƒë·ªÉ x·ª≠ l√Ω c√°c ƒëi·ªÉm thu mua tr√°i ph√©p.</textarea>
                </div>
            </div>
            
            <button onclick="updateAllData()" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
                üîÑ C·∫≠p Nh·∫≠t T·∫•t C·∫£ D·ªØ Li·ªáu
            </button>
            <button onclick="logout()" class="mt-2 bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                üö™ ƒêƒÉng Xu·∫•t
            </button>
            <button onclick="toggleDataControls()" class="mt-2 bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                ƒê√≥ng
            </button>
        </div>

        <header class="text-center mb-10">
            <h1 class="text-4xl font-bold text-gray-50 uppercase">B√°o C√°o Ho·∫°t ƒê·ªông Th√°ng 10/2025</h1>
            <p class="text-xl text-gray-300 mt-2">T·ªïng quan v·ªÅ Hi·ªáu su·∫•t S·∫£n xu·∫•t, T√†i ch√≠nh v√† V·∫≠n h√†nh</p>
        </header>

        <!-- KHU V·ª∞C KPI - T·ª∞ ƒê·ªòNG C·∫¨P NH·∫¨T -->
        <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-10" id="kpiSection">
            <!-- KPI cards s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông b·∫±ng JavaScript -->
        </section>

        <!-- B·ªë c·ª•c ch√≠nh -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="chartsSection">
            <!-- C√°c bi·ªÉu ƒë·ªì s·∫Ω ƒë∆∞·ª£c t·∫°o t·ª± ƒë·ªông b·∫±ng JavaScript -->
        </div>

    </div>

    <script>
        // ƒêƒÉng k√Ω plugin datalabels
        Chart.register(ChartDataLabels);

        // ========== H·ªÜ TH·ªêNG QU·∫¢N L√ù D·ªÆ LI·ªÜU T·∫¨P TRUNG ==========
        const dataManager = {
            // D·ªÆ LI·ªÜU G·ªêC - CH·ªà C·∫¶N THAY ƒê·ªîI ·ªû ƒê√ÇY
            kpis: {
                production: { 
                    value: 111.76, 
                    change: 11.76, 
                    label: "S·∫£n L∆∞·ª£ng Th√°ng 10/2025 (so v·ªõi KH)",
                    tooltip: "ƒê√£ v∆∞·ª£t 11,76% so v·ªõi k·∫ø ho·∫°ch th√°ng"
                },
                profit: { 
                    value: 120.2, 
                    change: 20.2, 
                    label: "L·ª£i Nhu·∫≠n Tr∆∞·ªõc Thu·∫ø (L≈©y k·∫ø 10T so v·ªõi KH NƒÉm)",
                    tooltip: "ƒê√£ v∆∞·ª£t 20,2% so v·ªõi k·∫ø ho·∫°ch nƒÉm"
                },
                price: { 
                    value: 1790.78, 
                    change: 10.83, 
                    label: "ƒê∆°n Gi√° B√°n B√¨nh Qu√¢n (TƒÉng so v·ªõi c√πng k·ª≥)",
                    tooltip: "ƒê√£ tƒÉng 10,83% so v·ªõi c√πng k·ª≥ nƒÉm 2024",
                    isCurrency: true
                },
                revenue: { 
                    value: 85.15, 
                    change: 5.43, 
                    label: "Doanh Thu Thu·∫ßn (L≈©y k·∫ø 10T so v·ªõi KH NƒÉm)",
                    tooltip: "ƒê√£ tƒÉng kho·∫£ng 5,43% so v·ªõi k·∫ø ho·∫°ch nƒÉm 2024"
                }
            },

            charts: {
                productionChart: {
                    labels: ['NT1', 'NT2', 'NT3', 'NT4'],
                    planned: [534.90, 502.80, 567.40, 385.20],
                    actual: [549.71, 622.57, 621.66, 430.38]
                },
                ytdProduction: {
                    achieved: 10240.58,
                    target: 13500.00
                },
                annualProduction: {
                    labels: ['2011', '2012', '2013', '2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025(10T)'],
                    data: [107, 1820, 5654, 9316, 14282, 15832, 18480, 18139, 15403, 15206, 15439, 13953, 13852, 11116, 10207]
                },
                financialResults: {
                    labels: ['Doanh Thu Thu·∫ßn', 'L·ª£i Nhu·∫≠n G·ªôp', 'L·ª£i Nhu·∫≠n Tr∆∞·ªõc Thu·∫ø'],
                    planned: [100, 100, 100],
                    actual: [85, 101.2, 120.2]
                },
                profitComposition: {
                    labels: ['Cao su Khai th√°c', 'Cao su Mua ngo√†i', 'H·∫°t ƒëi·ªÅu'],
                    data: [140.63, 2.59, 0.73]
                },
                cultivation: {
                    labels: ['V∆∞·ªùn Cao su Kinh doanh', 'V∆∞·ªùn Cao su KTCB', 'V∆∞·ªùn ƒêi·ªÅu', 'Tr·ªìng m·ªõi T√°i canh', 'S·∫ßu ri√™ng'],
                    data: [82.08, 100, 100, 98.90, 100]
                },
                hrMetrics: {
                    labels: ['T·ª∑ l·ªá Tr·ªëng v∆∞·ªùn', 'T·ª∑ l·ªá V·∫Øng c·∫°o', 'T·ª∑ l·ªá tham gia BHXH'],
                    data: [1.45, 12.83, 27.9]
                }
            },

            content: {
                productionDesc: "To√†n C√¥ng ty ƒë·∫°t 2.224,31 t·∫•n (111,76% KH th√°ng). L≈©y k·∫ø ƒë·∫°t 75,86% KH nƒÉm 2025. ƒê√¢y l√† th√†nh t·ª±u n·ªïi b·∫≠t trong ƒëi·ªÅu ki·ªán th·ªùi ti·∫øt kh√¥ng thu·∫≠n l·ª£i.",
                ytdDesc: "T√≠nh ƒë·∫øn h·∫øt th√°ng 10, c√¥ng ty ƒë√£ th·ª±c hi·ªán ƒë∆∞·ª£c 10.240,58 t·∫•n, ƒë·∫°t 75,86% k·∫ø ho·∫°ch nƒÉm (13.500 t·∫•n). ƒê√¢y l√† ti·ªÅn ƒë·ªÅ quan tr·ªçng ƒë·ªÉ ho√†n th√†nh m·ª•c ti√™u c·∫£ nƒÉm trong giai ƒëo·∫°n cao ƒëi·ªÉm cu·ªëi nƒÉm.",
                financeDesc: "K·∫øt qu·∫£ kinh doanh h·∫øt s·ª©c t√≠ch c·ª±c. D√π s·∫£n l∆∞·ª£ng b√°n m·ªõi ƒë·∫°t 79,4% v√† doanh thu ƒë·∫°t 85% KH, l·ª£i nhu·∫≠n tr∆∞·ªõc thu·∫ø ƒë√£ v∆∞·ª£t 20,2% KH nƒÉm. ƒêi·ªÅu n√†y minh ch·ª©ng cho hi·ªáu qu·∫£ c·ªßa chi·∫øn l∆∞·ª£c b√°n h√†ng t·ªëi ∆∞u gi√° v√† ki·ªÉm so√°t chi ph√≠ ch·∫∑t ch·∫Ω (chi ph√≠ b√°n h√†ng ch·ªâ s·ª≠ d·ª•ng 50,4% KH). D√≤ng ti·ªÅn thu·∫ßn th√°ng 10 ƒë·∫°t +30,26 t·ª∑ K√≠p.",
                risks: [
                    { icon: '‚óè', color: 'red-500', text: '<strong>Tr·ªôm c·∫Øp m·ªß:</strong> X·∫£y ra 10 v·ª•, thu h·ªìi 672 kg. V·∫•n ƒë·ªÅ ph·ª©c t·∫°p do c√≥ s·ª± ti·∫øp tay c·ªßa c√°c ƒëi·ªÉm thu mua tr√°i ph√©p.' },
                    { icon: '‚óè', color: '[#C6C865]', text: '<strong>M·ªß r·ªõt c·∫•p cao:</strong> Kh·ªëi l∆∞·ª£ng m·ªß nguy√™n li·ªáu r·ªõt c·∫•p to√†n c√¥ng ty chi·∫øm 45,53% (cao nh·∫•t t·∫°i NT1: 56,22%). Nguy√™n nh√¢n ch√≠nh l√† do m·ªß d√≠nh n∆∞·ªõc m∆∞a trong qu√° tr√¨nh c·∫°o.' },
                    { icon: '‚óè', color: '[#C6C865]', text: '<strong>XDCB ch·∫≠m ti·∫øn ƒë·ªô:</strong> H·∫°ng m·ª•c s√¢n b√™ t√¥ng (40%) v√† pallet s·∫Øt (5%) b·ªã ch·∫≠m do thi·∫øu nh√¢n l·ª±c v√† v·∫≠t t∆∞.' },
                    { icon: '‚óè', color: '[#C6C865]', text: '<strong>Thu mua ngo√†i:</strong> Kh√¥ng ƒë·∫°t k·∫ø ho·∫°ch th√°ng (72,46%) do th·ªã tr∆∞·ªùng c·∫°nh tranh m·∫°nh v√† gi√° thu mua b√™n ngo√†i cao h∆°n gi√° c√¥ng ty.' },
                    { icon: '‚óè', color: '[#C6C865]', text: '<strong>Ph·∫ßn m·ªÅm Workit:</strong> Module t√≠nh l∆∞∆°ng b·ªã ch·∫≠m ti·∫øn ƒë·ªô, ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫ø ho·∫°ch tr·∫£ l∆∞∆°ng.' }
                ],
                actions: [
                    { icon: '‚úì', color: 'green-500', text: '<strong>Ch·∫•t l∆∞·ª£ng Khai th√°c:</strong> T·∫≠p trung gi·∫£i ph√°p gi·∫£m m·ªß r·ªõt c·∫•p (45,53%) b·∫±ng c√°ch ki·ªÉm so√°t ch·∫∑t ch·∫Ω quy tr√¨nh c·∫°o v√† thu ho·∫°ch khi th·ªùi ti·∫øt thay ƒë·ªïi (t·ªëi ∆∞u h√≥a vi·ªác s·ª≠ d·ª•ng m√°ng che m∆∞a v√† quy tr√¨nh c·∫°o tr·ªÖ).' },
                    { icon: '‚úì', color: 'green-500', text: '<strong>ƒê·∫£m b·∫£o Ti·∫øn ƒë·ªô C√¥ng tr√¨nh:</strong> Kh·∫Øc ph·ª•c ngay v·∫•n ƒë·ªÅ thi·∫øu nh√¢n l·ª±c v√† cung ·ª©ng v·∫≠t t∆∞ ƒë·ªÉ ho√†n th√†nh c√°c h·∫°ng m·ª•c XDCB c√≤n ch·∫≠m ti·∫øn ƒë·ªô (S√¢n b√™ t√¥ng, pallet s·∫Øt).' },
                    { icon: '‚úì', color: 'green-500', text: '<strong>Ho√†n thi·ªán H·ªá th·ªëng L∆∞∆°ng:</strong> Quy·∫øt li·ªát x·ª≠ l√Ω d·ª©t ƒëi·ªÉm c√°c l·ªói v√† th·ªëng nh·∫•t d·ªØ li·ªáu tr√™n ph·∫ßn m·ªÅm Workit ƒë·ªÉ ƒë·∫£m b·∫£o ti·∫øn ƒë·ªô tr·∫£ l∆∞∆°ng cho c√¥ng nh√¢n.' },
                    { icon: '‚úì', color: 'green-500', text: '<strong>Ki·ªÉm so√°t Tr·ªôm c·∫Øp:</strong> TƒÉng c∆∞·ªùng c√¥ng t√°c b·∫£o v·ªá s·∫£n ph·∫©m, ƒë·∫∑c bi·ªát t·∫°i c√°c n√¥ng tr∆∞·ªùng c√≥ t·ª∑ l·ªá vi ph·∫°m cao (NT3 v√† NT1), ƒë·ªìng th·ªùi ph·ªëi h·ª£p v·ªõi ch√≠nh quy·ªÅn ƒë·ªãa ph∆∞∆°ng ƒë·ªÉ x·ª≠ l√Ω c√°c ƒëi·ªÉm thu mua tr√°i ph√©p.' }
                ]
            },

            // Ph∆∞∆°ng th·ª©c c·∫≠p nh·∫≠t d·ªØ li·ªáu t·ª´ input
            updateFromInputs() {
                // C·∫≠p nh·∫≠t KPI
                this.kpis.production.value = parseFloat(document.getElementById('kpiProduction').value) || 111.76;
                this.kpis.production.change = this.kpis.production.value - 100;
                
                this.kpis.profit.value = parseFloat(document.getElementById('kpiProfit').value) || 120.2;
                this.kpis.profit.change = this.kpis.profit.value - 100;
                
                this.kpis.price.value = parseFloat(document.getElementById('kpiPrice').value) || 1790.78;
                this.kpis.revenue.value = parseFloat(document.getElementById('kpiRevenue').value) || 85.15;
                this.kpis.revenue.change = this.kpis.revenue.value - 80;
                
                // C·∫≠p nh·∫≠t bi·ªÉu ƒë·ªì
                this.charts.productionChart.planned = [
                    parseFloat(document.getElementById('chartProdPlan1').value) || 534.90,
                    parseFloat(document.getElementById('chartProdPlan2').value) || 502.80,
                    parseFloat(document.getElementById('chartProdPlan3').value) || 567.40,
                    parseFloat(document.getElementById('chartProdPlan4').value) || 385.20
                ];
                
                this.charts.productionChart.actual = [
                    parseFloat(document.getElementById('chartProdActual1').value) || 549.71,
                    parseFloat(document.getElementById('chartProdActual2').value) || 622.57,
                    parseFloat(document.getElementById('chartProdActual3').value) || 621.66,
                    parseFloat(document.getElementById('chartProdActual4').value) || 430.38
                ];
                
                this.charts.ytdProduction.achieved = parseFloat(document.getElementById('chartYtdAchieved').value) || 10240.58;
                this.charts.ytdProduction.target = parseFloat(document.getElementById('chartYtdTarget').value) || 13500.00;
                
                this.charts.financialResults.actual = [
                    parseFloat(document.getElementById('chartFinance1').value) || 85,
                    parseFloat(document.getElementById('chartFinance2').value) || 101.2,
                    parseFloat(document.getElementById('chartFinance3').value) || 120.2
                ];
                
                this.charts.profitComposition.data = [
                    parseFloat(document.getElementById('chartProfit1').value) || 140.63,
                    parseFloat(document.getElementById('chartProfit2').value) || 2.59,
                    parseFloat(document.getElementById('chartProfit3').value) || 0.73
                ];
                
                this.charts.cultivation.data = [
                    parseFloat(document.getElementById('chartCultivation1').value) || 82.08,
                    parseFloat(document.getElementById('chartCultivation2').value) || 100,
                    parseFloat(document.getElementById('chartCultivation3').value) || 100,
                    parseFloat(document.getElementById('chartCultivation4').value) || 98.90,
                    parseFloat(document.getElementById('chartCultivation5').value) || 100
                ];
                
                this.charts.hrMetrics.data = [
                    parseFloat(document.getElementById('chartHr1').value) || 1.45,
                    parseFloat(document.getElementById('chartHr2').value) || 12.83,
                    parseFloat(document.getElementById('chartHr3').value) || 27.9
                ];
                
                // C·∫≠p nh·∫≠t n·ªôi dung
                this.content.productionDesc = document.getElementById('contentProduction').value;
                this.content.ytdDesc = document.getElementById('contentYtd').value;
                this.content.financeDesc = document.getElementById('contentFinance').value;
                
                // X·ª≠ l√Ω n·ªôi dung risks v√† actions t·ª´ textarea
                const risksText = document.getElementById('contentRisks').value;
                const actionsText = document.getElementById('contentActions').value;
                
                this.content.risks = this.parseTextToArray(risksText, '‚óè');
                this.content.actions = this.parseTextToArray(actionsText, '‚úì');
            },

            // Ph∆∞∆°ng th·ª©c chuy·ªÉn ƒë·ªïi text th√†nh m·∫£ng ƒë·ªëi t∆∞·ª£ng
            parseTextToArray(text, icon) {
                const lines = text.split('\n').filter(line => line.trim() !== '');
                return lines.map(line => {
                    // X·ª≠ l√Ω d√≤ng ƒë·ªÉ t√°ch icon v√† n·ªôi dung
                    const cleanLine = line.replace(/^[‚Ä¢\-\*]\s*/, '').trim();
                    return {
                        icon: icon,
                        color: icon === '‚óè' ? '[#C6C865]' : 'green-500',
                        text: cleanLine
                    };
                });
            },

            // Ph∆∞∆°ng th·ª©c l·∫•y d·ªØ li·ªáu KPI ƒë·ªãnh d·∫°ng
            getFormattedKPI(key) {
                const kpi = this.kpis[key];
                if (kpi.isCurrency) {
                    return `$${kpi.value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
                }
                return `${kpi.value.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}%`;
            }
        };

        // ========== H·ªÜ TH·ªêNG ƒêƒÇNG NH·∫¨P ·∫®N ==========
        let isLoggedIn = false;

        function showLogin() {
            if (isLoggedIn) {
                // N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p, hi·ªán ph·∫ßn qu·∫£n l√Ω d·ªØ li·ªáu
                document.getElementById('dataControls').classList.remove('hidden');
            } else {
                // N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p, hi·ªán form ƒëƒÉng nh·∫≠p
                document.getElementById('loginContainer').style.display = 'flex';
            }
        }

        function closeLogin() {
            document.getElementById('loginContainer').style.display = 'none';
            document.getElementById('loginError').classList.add('hidden');
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorElement = document.getElementById('loginError');
            
            if (username === 'truong83' && password === 'Drc@drc') {
                isLoggedIn = true;
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dataControls').classList.remove('hidden');
                initializeDataControls();
            } else {
                errorElement.classList.remove('hidden');
            }
        }

        function logout() {
            isLoggedIn = false;
            document.getElementById('dataControls').classList.add('hidden');
        }

        // ========== H·ªÜ TH·ªêNG RENDER T·ª∞ ƒê·ªòNG ==========
        const chartInstances = {};

        function renderKPICards() {
            const kpiSection = document.getElementById('kpiSection');
            kpiSection.innerHTML = '';

            Object.keys(dataManager.kpis).forEach(key => {
                const kpi = dataManager.kpis[key];
                const kpiCard = document.createElement('div');
                kpiCard.className = 'kpi-card rounded-lg shadow-lg p-6 flex flex-col justify-center text-center';
                
                kpiCard.innerHTML = `
                    <div class="kpi-value">
                        ${dataManager.getFormattedKPI(key)}
                        <span class="indicator-badge" data-tooltip="${kpi.tooltip}">
                            <span class="up-arrow">‚ñ≤</span>
                            +${kpi.change.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2})}%
                        </span>
                    </div>
                    <div class="kpi-label">${kpi.label}</div>
                `;
                
                kpiSection.appendChild(kpiCard);
            });
        }

        function renderCharts() {
            const chartsSection = document.getElementById('chartsSection');
            chartsSection.innerHTML = `
                <div class="lg:col-span-2 card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">S·∫£n L∆∞·ª£ng Khai Th√°c Th√°ng 10/2025 (t·∫•n)</h2>
                    <div class="chart-container">
                        <canvas id="productionChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300" id="productionDesc">${dataManager.content.productionDesc}</p>
                </div>

                <div class="card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">L≈©y K·∫ø K·∫ø Ho·∫°ch NƒÉm 2025</h2>
                    <div class="chart-container-sm">
                        <canvas id="ytdProductionChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300">${dataManager.content.ytdDesc}</p>
                </div>

                <div class="lg:col-span-2 card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">S·∫£n L∆∞·ª£ng Khai Th√°c Cao Su (2011 - 2025)</h2>
                    <div class="chart-container">
                        <canvas id="qualityChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300">Bi·ªÉu ƒë·ªì minh h·ªça chu k·ª≥ ph√°t tri·ªÉn c·ªßa s·∫£n l∆∞·ª£ng m·ªß quy kh√¥ h√†ng nƒÉm.</p>
                </div>

                <div class="card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">K·∫øt Qu·∫£ T√†i Ch√≠nh L≈©y K·∫ø 10 Th√°ng (% KH NƒÉm)</h2>
                    <div class="chart-container-sm"> 
                        <canvas id="financialChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300">${dataManager.content.financeDesc}</p>
                </div>

                <div class="card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">C∆° C·∫•u L·ª£i Nhu·∫≠n G·ªôp 10 Th√°ng</h2>
                    <div class="chart-container-sm">
                        <canvas id="profitCompositionChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300">L·ª£i nhu·∫≠n g·ªôp ƒë·∫°t 143,96 t·ª∑ K√≠p.</p>
                </div>

                <div class="card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">C√¥ng T√°c ChƒÉm S√≥c V∆∞·ªùn C√¢y (% Ho√†n Th√†nh)</h2>
                    <div class="chart-container-sm"> 
                        <canvas id="cultivationChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300">C√¥ng t√°c chƒÉm s√≥c v∆∞·ªùn c√¢y KTCB, ƒêi·ªÅu, v√† S·∫ßu ri√™ng ƒë·ªÅu ƒë·∫°t 100% k·∫ø ho·∫°ch th√°ng.</p>
                </div>
                
                <div class="card-bg rounded-lg shadow-md p-6">
                    <h2 class="text-xl font-bold text-gray-50 mb-4">T√¨nh H√¨nh Nh√¢n S·ª± Th√°ng 10</h2>
                    <div class="chart-container-sm">
                        <canvas id="hrChart"></canvas>
                    </div>
                    <p class="mt-4 text-sm text-gray-300">T·ªïng lao ƒë·ªông ·ªïn ƒë·ªãnh (2.641 ng∆∞·ªùi). T·ª∑ l·ªá tr·ªëng v∆∞·ªùn gi·∫£m c√≤n 1,45%.</p>
                </div>

                <div class="lg:col-span-3 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="card-bg rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-50 mb-4">C√°c V·∫•n ƒê·ªÅ T·ªìn T·∫°i & R·ªßi Ro</h2>
                        <ul class="space-y-3 mt-4" id="riskList"></ul>
                    </div>

                    <div class="card-bg rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-50 mb-4">ƒê·ªÅ xu·∫•t H∆∞·ªõng h√†nh ƒë·ªông trong th√°ng t·ªõi</h2>
                        <ul class="space-y-3 mt-4" id="actionList"></ul>
                    </div>
                </div>
            `;

            // Render danh s√°ch r·ªßi ro v√† h√†nh ƒë·ªông
            renderRiskAndActionLists();
            
            // Kh·ªüi t·∫°o t·∫•t c·∫£ bi·ªÉu ƒë·ªì
            initializeAllCharts();
        }

        function renderRiskAndActionLists() {
            const riskList = document.getElementById('riskList');
            const actionList = document.getElementById('actionList');

            riskList.innerHTML = '';
            actionList.innerHTML = '';

            dataManager.content.risks.forEach(risk => {
                const li = document.createElement('li');
                li.className = 'flex items-center';
                li.innerHTML = `
                    <span class="text-${risk.color} text-2xl mr-3">${risk.icon}</span>
                    <span class="text-gray-300">${risk.text}</span>
                `;
                riskList.appendChild(li);
            });

            dataManager.content.actions.forEach(action => {
                const li = document.createElement('li');
                li.className = 'flex items-center';
                li.innerHTML = `
                    <span class="text-${action.color} text-2xl mr-3">${action.icon}</span>
                    <span class="text-gray-300">${action.text}</span>
                `;
                actionList.appendChild(li);
            });
        }

        // ========== QU·∫¢N L√ù TAB ==========
        function openTab(tabName) {
            // ·∫®n t·∫•t c·∫£ tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let i = 0; i < tabContents.length; i++) {
                tabContents[i].classList.remove('active');
            }
            
            // X√≥a active class t·ª´ t·∫•t c·∫£ tab buttons
            const tabButtons = document.getElementsByClassName('tab-button');
            for (let i = 0; i < tabButtons.length; i++) {
                tabButtons[i].classList.remove('active');
            }
            
            // Hi·ªán tab ƒë∆∞·ª£c ch·ªçn v√† th√™m active class
            document.getElementById(tabName).classList.add('active');
            event.currentTarget.classList.add('active');
        }

        function toggleDataControls() {
            document.getElementById('dataControls').classList.add('hidden');
        }

        function initializeDataControls() {
            // Kh·ªüi t·∫°o gi√° tr·ªã cho c√°c input t·ª´ dataManager
            document.getElementById('kpiProduction').value = dataManager.kpis.production.value;
            document.getElementById('kpiProfit').value = dataManager.kpis.profit.value;
            document.getElementById('kpiPrice').value = dataManager.kpis.price.value;
            document.getElementById('kpiRevenue').value = dataManager.kpis.revenue.value;
            
            // Bi·ªÉu ƒë·ªì s·∫£n l∆∞·ª£ng
            document.getElementById('chartProdPlan1').value = dataManager.charts.productionChart.planned[0];
            document.getElementById('chartProdPlan2').value = dataManager.charts.productionChart.planned[1];
            document.getElementById('chartProdPlan3').value = dataManager.charts.productionChart.planned[2];
            document.getElementById('chartProdPlan4').value = dataManager.charts.productionChart.planned[3];
            
            document.getElementById('chartProdActual1').value = dataManager.charts.productionChart.actual[0];
            document.getElementById('chartProdActual2').value = dataManager.charts.productionChart.actual[1];
            document.getElementById('chartProdActual3').value = dataManager.charts.productionChart.actual[2];
            document.getElementById('chartProdActual4').value = dataManager.charts.productionChart.actual[3];
            
            // Bi·ªÉu ƒë·ªì kh√°c
            document.getElementById('chartYtdAchieved').value = dataManager.charts.ytdProduction.achieved;
            document.getElementById('chartYtdTarget').value = dataManager.charts.ytdProduction.target;
            
            document.getElementById('chartFinance1').value = dataManager.charts.financialResults.actual[0];
            document.getElementById('chartFinance2').value = dataManager.charts.financialResults.actual[1];
            document.getElementById('chartFinance3').value = dataManager.charts.financialResults.actual[2];
            
            document.getElementById('chartProfit1').value = dataManager.charts.profitComposition.data[0];
            document.getElementById('chartProfit2').value = dataManager.charts.profitComposition.data[1];
            document.getElementById('chartProfit3').value = dataManager.charts.profitComposition.data[2];
            
            document.getElementById('chartCultivation1').value = dataManager.charts.cultivation.data[0];
            document.getElementById('chartCultivation2').value = dataManager.charts.cultivation.data[1];
            document.getElementById('chartCultivation3').value = dataManager.charts.cultivation.data[2];
            document.getElementById('chartCultivation4').value = dataManager.charts.cultivation.data[3];
            document.getElementById('chartCultivation5').value = dataManager.charts.cultivation.data[4];
            
            document.getElementById('chartHr1').value = dataManager.charts.hrMetrics.data[0];
            document.getElementById('chartHr2').value = dataManager.charts.hrMetrics.data[1];
            document.getElementById('chartHr3').value = dataManager.charts.hrMetrics.data[2];
            
            // N·ªôi dung
            document.getElementById('contentProduction').value = dataManager.content.productionDesc;
            document.getElementById('contentYtd').value = dataManager.content.ytdDesc;
            document.getElementById('contentFinance').value = dataManager.content.financeDesc;
            
            // Chuy·ªÉn ƒë·ªïi m·∫£ng risks v√† actions th√†nh text
            document.getElementById('contentRisks').value = dataManager.content.risks.map(risk => `‚Ä¢ ${risk.text}`).join('\n');
            document.getElementById('contentActions').value = dataManager.content.actions.map(action => `‚Ä¢ ${action.text}`).join('\n');
        }

        // ========== H√ÄM C·∫¨P NH·∫¨T TO√ÄN B·ªò ==========
        function updateAllData() {
            // C·∫≠p nh·∫≠t d·ªØ li·ªáu t·ª´ input
            dataManager.updateFromInputs();
            
            // Render l·∫°i t·∫•t c·∫£
            renderKPICards();
            renderCharts();
            
            alert('‚úÖ ƒê√£ c·∫≠p nh·∫≠t to√†n b·ªô d·ªØ li·ªáu!');
        }

        // ========== C·∫§U H√åNH BI·ªÇU ƒê·ªí ==========
        const brilliantGreens = ['#75B033', '#6A9B41', '#91A582', '#C6C865', '#4953A5'];
        const accents = {
            warning: '#C6C865',
            danger: '#FF4D4D',
            success: '#75B033'
        };

        const defaultChartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: { color: '#E5E7EB' }
                }
            },
            scales: {
                x: {
                    grid: { display: false },
                    ticks: { color: '#9CA3AF' }
                },
                y: {
                    beginAtZero: true,
                    grid: { color: '#374151' },
                    ticks: { color: '#9CA3AF' }
                }
            }
        };

        function initializeAllCharts() {
            // Bi·ªÉu ƒë·ªì 1: S·∫£n l∆∞·ª£ng theo NT
            chartInstances.productionChart = new Chart(document.getElementById('productionChart'), {
                type: 'bar',
                data: {
                    labels: dataManager.charts.productionChart.labels,
                    datasets: [
                        {
                            label: 'K·∫ø Ho·∫°ch',
                            data: dataManager.charts.productionChart.planned,
                            backgroundColor: brilliantGreens[2],
                            borderColor: brilliantGreens[2],
                            borderWidth: 1
                        },
                        {
                            label: 'Th·ª±c Hi·ªán',
                            data: dataManager.charts.productionChart.actual,
                            backgroundColor: brilliantGreens[0],
                            borderColor: brilliantGreens[0],
                            borderWidth: 1
                        }
                    ]
                },
                options: defaultChartOptions
            });

            // Bi·ªÉu ƒë·ªì 2: L≈©y k·∫ø nƒÉm
            chartInstances.ytdProductionChart = new Chart(document.getElementById('ytdProductionChart'), {
                type: 'doughnut',
                data: {
                    labels: [`ƒê√£ Th·ª±c Hi·ªán (${((dataManager.charts.ytdProduction.achieved/dataManager.charts.ytdProduction.target)*100).toFixed(2)}%)`, 'C√≤n L·∫°i'],
                    datasets: [{
                        data: [dataManager.charts.ytdProduction.achieved, dataManager.charts.ytdProduction.target - dataManager.charts.ytdProduction.achieved],
                        backgroundColor: [brilliantGreens[1], brilliantGreens[3]],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#E5E7EB' }
                        }
                    }
                }
            });

            // Bi·ªÉu ƒë·ªì 3: S·∫£n l∆∞·ª£ng h√†ng nƒÉm
            chartInstances.qualityChart = new Chart(document.getElementById('qualityChart'), {
                type: 'line', 
                data: {
                    labels: dataManager.charts.annualProduction.labels,
                    datasets: [{
                        label: 'S·∫£n L∆∞·ª£ng (t·∫•n m·ªß quy kh√¥)',
                        data: dataManager.charts.annualProduction.data,
                        backgroundColor: 'rgba(117, 176, 51, 0.1)',
                        borderColor: brilliantGreens[0],
                        tension: 0.4,
                        pointRadius: 6,
                        pointBackgroundColor: brilliantGreens[0],
                        fill: true,
                    }]
                },
                options: {
                    ...defaultChartOptions,
                    plugins: {
                        ...defaultChartOptions.plugins,
                        tooltip: { enabled: false },
                        datalabels: {
                            align: 'top',
                            color: '#E5E7EB',
                            font: { weight: 'bold', size: 10 },
                            formatter: (value) => value.toLocaleString('en-US'),
                        },
                        legend: { display: false }
                    },
                    scales: {
                        ...defaultChartOptions.scales,
                        y: {
                            ...defaultChartOptions.scales.y,
                            max: 20000,
                            ticks: {
                                color: '#9CA3AF',
                                callback: function(value) {
                                    return value.toLocaleString('en-US') + ' t·∫•n'; 
                                }
                            }
                        }
                    }
                }
            });

            // Bi·ªÉu ƒë·ªì 4: K·∫øt qu·∫£ t√†i ch√≠nh
            chartInstances.financialChart = new Chart(document.getElementById('financialChart'), {
                type: 'bar',
                data: {
                    labels: dataManager.charts.financialResults.labels,
                    datasets: [
                        {
                            label: 'K·∫ø Ho·∫°ch NƒÉm',
                            data: dataManager.charts.financialResults.planned,
                            backgroundColor: brilliantGreens[2],
                            borderWidth: 1
                        },
                        {
                            label: 'L≈©y K·∫ø 10T Th·ª±c Hi·ªán',
                            data: dataManager.charts.financialResults.actual,
                            backgroundColor: brilliantGreens[0],
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    ...defaultChartOptions,
                    scales: {
                        ...defaultChartOptions.scales,
                        y: {
                            ...defaultChartOptions.scales.y,
                            ticks: {
                                color: '#9CA3AF',
                                callback: function(value) { return value + '%' }
                            }
                        }
                    }
                }
            });

            // Bi·ªÉu ƒë·ªì 5: C∆° c·∫•u l·ª£i nhu·∫≠n
            chartInstances.profitCompositionChart = new Chart(document.getElementById('profitCompositionChart'), {
                type: 'pie',
                data: {
                    labels: dataManager.charts.profitComposition.labels,
                    datasets: [{
                        data: dataManager.charts.profitComposition.data,
                        backgroundColor: [brilliantGreens[0], brilliantGreens[1], brilliantGreens[3]],
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#E5E7EB' }
                        }
                    }
                }
            });

            // Bi·ªÉu ƒë·ªì 6: ChƒÉm s√≥c
            chartInstances.cultivationChart = new Chart(document.getElementById('cultivationChart'), {
                type: 'bar',
                data: {
                    labels: dataManager.charts.cultivation.labels,
                    datasets: [{
                        label: '% Ho√†n Th√†nh',
                        data: dataManager.charts.cultivation.data,
                        backgroundColor: [
                            accents.warning,
                            brilliantGreens[0],
                            brilliantGreens[0],
                            brilliantGreens[1],
                            brilliantGreens[0]
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    ...defaultChartOptions,
                    plugins: {
                        ...defaultChartOptions.plugins,
                        legend: { display: false }
                    },
                    scales: {
                        ...defaultChartOptions.scales,
                        y: {
                            ...defaultChartOptions.scales.y,
                            ticks: {
                                color: '#9CA3AF',
                                callback: function(value) { return value + '%' }
                            }
                        }
                    }
                }
            });

            // Bi·ªÉu ƒë·ªì 7: Nh√¢n s·ª±
            chartInstances.hrChart = new Chart(document.getElementById('hrChart'), {
                type: 'bar',
                data: {
                    labels: dataManager.charts.hrMetrics.labels,
                    datasets: [{
                        label: 'T·ª∑ l·ªá (%)',
                        data: dataManager.charts.hrMetrics.data,
                        backgroundColor: [
                            brilliantGreens[0],
                            accents.danger,
                            accents.warning
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    ...defaultChartOptions,
                    plugins: {
                        ...defaultChartOptions.plugins,
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            ...defaultChartOptions.scales.x,
                            ticks: { color: '#9CA3AF' }
                        },
                        y: {
                            ...defaultChartOptions.scales.y,
                            ticks: {
                                color: '#9CA3AF',
                                callback: function(value) { return value + '%' }
                            }
                        }
                    }
                }
            });
        }

        // ========== CH·ª®C NƒÇNG XU·∫§T PDF ==========
        document.getElementById('exportPdf').addEventListener('click', function() {
            const element = document.querySelector('.container');
            const options = {
                margin: [10, 10, 10, 10],
                filename: 'BaoCaoThang10_2025.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            this.innerHTML = '‚è≥ ƒêang xu·∫•t PDF...';
            this.disabled = true;
            
            html2pdf().set(options).from(element).save().then(() => {
                this.innerHTML = 'üìä Xu·∫•t B√°o c√°o PDF';
                this.disabled = false;
            });
        });

        // ========== KH·ªûI T·∫†O BAN ƒê·∫¶U ==========
        document.addEventListener('DOMContentLoaded', function() {
            renderKPICards();
            renderCharts();
        });

    </script>
</body>
</html>
